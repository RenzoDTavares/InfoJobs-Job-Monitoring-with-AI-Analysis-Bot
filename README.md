# InfoJobs Job Scraper & Telegram Alert Bot

A fully automated job-monitoring system for **InfoJobs Brazil**, featuring AI-powered analysis (Google Gemini) and instant Telegram alerts.

This project continuously monitors job postings based on search roles defined in `clientes.db`, extracts all job details, processes them with AI, and sends beautiful HTML-formatted alerts to Telegram ‚Äî while storing everything in a SQLite database to avoid duplicates.

---

## Overview

The system operates as follows:

- Loads roles from the `cliente` table in `clientes.db`
- For each role:
  - Visits InfoJobs
  - Searches for available jobs
  - Extracts real job URLs (3 fallback extraction methods)
  - Checks if the job already exists in the database
  - If the job is **new**:
    - Extracts the full job description
    - Sends the text to **Google Gemini 2.5 Flash**
    - Produces a clean summary with max 4 bullet points (RAW text, no Markdown)
    - Formats the message using safe HTML for Telegram
    - Sends the alert instantly to the Telegram group/channel
  - Stores all details in `vagasINFO.db`

---

## Features

- üîé Resilient web scraper with 3 automatic fallback methods for InfoJobs  
- ü§ñ Professional summaries generated by **Google Gemini Flash**  
- üì¢ HTML-formatted Telegram alerts with safe entities  
- üß† Two execution modes:
  - **Initial Population:** saves the newest N jobs (AI disabled)
  - **Continuous Monitoring:** detects only new jobs, runs AI, sends alerts  
- üö® Double-spaced bullet points compatible with Telegram HTML  
- üóÑ Robust SQLite database (composite primary key per job + search term)  
---

## Requirements

```
Python 3.8+
requests
beautifulsoup4
google-genai
```

Install dependencies:

```bash
pip install requests beautifulsoup4 google-genai
```

---

## Database Structure

### üìå `vagasINFO.db` (auto-created)

```
vagas_encontradas(
    vagas_id TEXT,
    busca_termo TEXT,
    titulo TEXT,
    empresa TEXT,
    localizacao TEXT,
    salario TEXT,
    modalidade TEXT,
    url_vaga TEXT,
    resumo_ia TEXT,
    data_extracao TIMESTAMP,
    PRIMARY KEY (vagas_id, busca_termo)
)
```

### üìå `clientes.db` (you create manually)

```sql
CREATE TABLE cliente (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    role TEXT NOT NULL
);

INSERT INTO cliente (name, role) VALUES
('Client A', 'Python Developer'),
('Client B', 'Data Analyst'),
('Client C', 'Product Owner');
```

Each `role` becomes an InfoJobs search term.

---

## Configuration

Edit at the top of your script:

```python
DB_VAGAS_NOME = "vagasINFO.db"
DB_CLIENTES_NOME = "clientes.db"
TEMPO_ESPERA = 300              # delay between cycles
VAGAS_LIMITE_POPULACAO = 10    # initial population limit per role
RETRY_DELAY = 2
MAX_RETRIES = 3
```

### Telegram

```python
TELEGRAM_TOKEN = "YOUR_TELEGRAM_BOT_TOKEN"
TELEGRAM_CHAT_ID = "-100XXXXXXXXXX"
```

### Google Gemini

```python
API_KEY = "YOUR_GEMINI_API_KEY"
```

---

## How It Works

### 1Ô∏è‚É£ Initial Population (AI OFF)
- Runs only on the first cycle for each role  
- Saves up to N recent jobs  
- Does **not** call AI  
- Does **not** send Telegram alerts  

This builds a stable baseline for future comparisons.

---

### 2Ô∏è‚É£ Continuous Monitoring (AI ON)

Every subsequent cycle:

1. Fetch new job listings  
2. If a job is already in the database ‚Üí stop pagination immediately  
3. If it‚Äôs new:
   - Retrieve all job details
   - Scrape the full job description
   - Send text to Gemini for summarization
   - Build a clean HTML Telegram message
   - Send the alert instantly
   - Save everything in the database  

---

## Example Telegram Alert

```
üö® ALERT: NEW JOB FOUND (INFOJOBS)! üö®
Search: Python Developer
Job: Python Developer (Mid-Level)
Company: TechFlow Solutions
Location/Work Mode: Home Office
Salary: R$ 10,000 ‚Äì R$ 13,000

AI Summary:
‚Ä¢ Development of APIs and integration services using Python and FastAPI

‚Ä¢ Mandatory experience with Docker, Git and SQL databases

‚Ä¢ Nice-to-have: AWS, Kubernetes, CI/CD pipelines

‚Ä¢ Benefits: premium health plan, food allowance, full remote work
```

---

## Running

Run the script:

```bash
python infojobs.py
```
